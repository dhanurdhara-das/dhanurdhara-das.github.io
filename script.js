// Translations
const translations = {
    en: {
        lang: {
            english: 'English',
            portuguese: 'Português'
        },
        nav: {
            logo: 'Wellness Center',
            home: 'Home',
            about: 'Bhakti Marga',
            satguru: 'Satguru',
            bio: 'Bio',
            practices: 'Practices',
            contact: 'Contact'
        },
        home: {
            heroTitle: 'Dhanurdhara Das Ananda',
            heroSubtitle: 'Let\'s dive into Bhakti',
            getStarted: 'Get Started',
            feature1Title: 'The Devotional path',
            feature1Text: 'Lord Kṛṣṇa says:\nIn My opinion, those who are forever absorbed in Me with strong faith and worship My personal form with focussed minds, are on the highest path.',
            feature1Source: 'Bhagavad Gita 12.2',
            feature2Title: 'Natural Methods',
            feature2Text: 'Bhakti is an exclusive flow of loving consciousness toward Bhagavān that results in a deep feeling of belonging, is expressed as sevā, and puts an end to all suffering.',
            feature2Source: 'Paramahamsa Vishwananda',
            feature3Text: 'Of all forms of worship of the Lord, love is the highest.',
            feature3Source: 'Saint Surdas'
        },
        about: {
            title: 'Bhakti Marga',
            storyTitle: 'Our Story',
            story1: 'Bhakti Marga began in 2005 as a small devotional community dedicated to cultivating a life rooted in love, service, and spiritual practice. Over the years it has grown into a global movement with centres, temples, and ashrams across Europe, the Americas, Africa, and Asia. Its international headquarters, Shree Peetha Nilaya in Germany, serves as the main ashram and training hub. Additional temples and ashrams operate in countries such as Portugal, the UK, France, South Africa, Mauritius, India, the USA, and Brazil, each offering regular community gatherings and devotional programs.\n\nThe path is grounded in bhakti, the practice of directing the heart toward the Divine through meditation, chanting, prayer, puja, and selfless service. Bhakti Marga places a strong emphasis on lived spirituality: developing devotion, cultivating inner transformation, and building supportive communities that help individuals bring spiritual principles into daily life.\n\nActivities include courses on meditation and yoga, deity worship, satsangs, music programs, retreats, seva initiatives, pilgrimages, and large international events such as kirtan festivals and sacred celebrations. Many country groups also maintain local temples or puja halls where regular prayers and rituals are offered.\n\nToday Bhakti Marga is active in more than 40 countries, supported by hundreds of volunteers and practitioners who help maintain temples, organise events, and share the teachings. Its aim remains simple: to guide people toward a loving, personal relationship with the Divine and to support a devotional way of living in modern society.',
            story2: '',
            story3: '',
            valuesTitle: '4 Arms',
            value1Title: 'Yoga & Meditation',
            value1Text: 'Still the mind, find god within',
            value2Title: 'Knowledge',
            value2Text: 'Gain insights and clarity',
            value3Title: 'Rituals',
            value3Text: 'Deepen divine connection',
            value4Title: 'Devotional Arts',
            value4Text: 'Create an expression of love',
            readMore: 'Read more',
            socialMediaTitle: 'Follow Bhakti Marga'
        },
        bio: {
            title: 'Bio',
            name: 'Dhanurdhara Das Ananda',
            titleText: 'Teacher of Spiritual Knowledge, Rituals & Atma Kriya Yoga',
            text1: 'Born in July 1994, Dhanurdhara Das Ananda grew up in a religious family, yet he never considered himself a religious person. As a young man, after achieving many of the things he desired, he began to feel an inner emptiness he couldn\'t explain or fill.',
            text2: 'With his long-standing interest in history, politics, and philosophy, he turned his attention toward self-knowledge, God, and the depth of Hindu culture.',
            text3: 'In January 2017, he met Paramahamsa Vishwananda in São Paulo, where he experienced something profound and transformative — an encounter he later understood as a call from his soul to his Satguru.',
            text4: 'In Florianópolis, where he lived, Paramahamsa Vishwananda inaugurated a temple located just ten minutes from his home, which Dhanurdhara began to attend regularly. A year later, he traveled to Germany to Shree Peetha Nilaya, where he dedicated himself to seva (selfless service) and a deeper study of Bhakti Marga and Hinduism.',
            educationTitle: 'Education & Certifications',
            education1: 'Training in Bhakti Yoga and Vedic Philosophy, Bhakti Marga Academy',
            education2: 'Certified Atma Kriya Yoga Teacher',
            education3: 'Training in Vedic Rituals and Spiritual Ceremonies',
            education4: 'Ongoing studies under the guidance of Paramahamsa Vishwananda',
            experienceTitle: 'Experience',
            experienceText: 'With over seven years dedicated to the Bhakti path, Dhanurdhara Das Ananda serves as a teacher and facilitator of spiritual practices, offering classes and talks on Vedic knowledge, rituals, and Atma Kriya Yoga. His work inspires spiritual seekers to cultivate a deeper relationship with the Divine, integrating ancient wisdom with daily devotion and self-discovery.'
        },
        satguru: {
            title: 'Satguru',
            subtitle: 'Paramahamsa Vishwananda',
            text1: 'Paramahamsa Sri Swami Vishwananda (born 13 June 1978 in Beau Bassin–Rose Hill, Mauritius) is a Mauritian-born Hindu spiritual teacher and the founder of Bhakti Marga. His early life is presented by his organisation as steeped in devotion, with a formative encounter with Mahavatar Babaji in childhood—a relationship he describes as the guiding thread of his mission.',
            text2: 'After traveling and giving darshan in Europe in the late 1990s, he formally established Bhakti Marga on 13 June 2005. The movement\'s international headquarters is Shree Peetha Nilaya in Heidenrod (Taunus), Germany, from which he teaches a path of devotion (bhakti), including practices such as Atma Kriya Yoga.',
            text3: 'In recent years, he articulated the Hari Bhakta Sampradaya within which Bhakti Marga operates, and the mission has grown to include temples and centers worldwide.',
            meetHim: 'Meet Him',
            spotifyHeading: 'Keep Him always in Our Minds'
        },
        practices: {
            title: 'Practices',
            practice1Title: 'Atma Kriya Yoga',
            practice1Text: 'A grace-based yoga given through Paramahamsa Vishwananda, awakening devotion to restore the soul\'s natural connection with the Divine and deepen love for God.',
            practice2Title: 'Babaji Surya Namaskar',
            practice2Text: 'A moving meditation honoring the body as a temple. Practised in a few minutes daily, it brings light, vitality, and uplifting energy through your whole being.',
            practice3Title: 'Om Chanting',
            practice3Text: 'God creates through vibration; OM is the seed sound. Bathing in its resonance helps clear mental and physical blocks. Practised in a group, it also connects hearts.',
            practice4Title: 'Simple Puja',
            practice4Text: 'A Vaishnava offering of self to Sri Hari through worship and love—building a living relationship with Him and revealing the joy of our eternal bond with God.',
            practice5Title: 'Abhishekam',
            practice5Text: 'A sacred bathing ritual that deepens devotion, cleansing inner negativity and balancing the body\'s natural elements, bringing purification, harmony, and grace.',
            practice6Title: 'Yajña',
            practice6Text: 'Selfless offering for a noble purpose: an ancient fire ceremony for purification and worship. Through giving offerings to the Divine, we learn surrender and prayerful trust.',
            practice7Title: 'Kalash Puja',
            practice7Text: 'A blessing ritual for occasions, people, or new spaces. Energised kalash water is sprinkled or poured, carrying the blessings of the main Deity and all invoked deities.',
            practice8Title: 'Bhagavad Gita',
            practice8Text: 'Practical guidance on yoga, self-mastery, and perfection. It helps us face restless thoughts and desires that lead to suffering, and turns life into devotion and clarity.',
            practice9Title: 'Tadatmya Vedanta',
            practice9Text: 'A teaching on the soul\'s intimate belonging to God: love, dependence, and grace reveal unity with the Divine without dissolving the soul\'s individuality.',
            moreInfoButton: 'For more info'
        },
        booking: {
            title: 'Contact',
            nameLabel: 'Full Name',
            emailLabel: 'Email',
            phoneLabel: 'Phone',
            dateLabel: 'Preferred Date',
            timeLabel: 'Preferred Time',
            messageLabel: 'Message',
            submitButton: 'Send Message'
        },
        footer: {
            text: 'Dhanurdhara Das Ananda. All rights reserved.',
            privacyLink: 'Privacy Policy'
        },
        privacy: {
            title: 'Privacy Policy',
            lastUpdated: 'Last updated: 2026',
            intro: 'This website is a personal project operated by <strong>Dhanurdhara Das Ananda (Guilherme da Silva)</strong>. Only minimal data is collected, and only for responding to messages submitted through the contact form.',
            section1Title: '1. Data collected through the contact form',
            section1Intro: 'When you send a message, the following information is collected:',
            section1Item1: 'Full name',
            section1Item2: 'Email address',
            section1Item3: 'Your message',
            section1FormJS: 'The form is handled by a third-party service called <strong>FormJS</strong>. Your data is:',
            section1FormJSItem1: 'stored on FormJS servers, and',
            section1FormJSItem2: 'forwarded by email to: <strong>gui.alucios@gmail.com</strong>.',
            section1Contact: 'Your contact for privacy inquiries is: <strong>dhanurdharadas@bhaktimarga.org</strong>.',
            section1Policy: 'FormJS processes and stores your submission according to its own privacy policy, which can be found on the FormJS website.',
            section2Title: '2. Google reCAPTCHA v3',
            section2Intro: 'The form uses <strong>Google reCAPTCHA v3</strong> to prevent spam and abuse. reCAPTCHA may collect technical data including:',
            section2Item1: 'IP address',
            section2Item2: 'Browser details',
            section2Item3: 'Interaction patterns',
            section2Policy: 'Google processes this data according to its own policies:',
            section2Policy1: 'Google Privacy Policy',
            section2Policy2: 'Google Terms of Service',
            section3Title: '3. Hosting & Technical Logs',
            section3Content: 'This site is hosted on <strong>GitHub Pages</strong>, with the domain managed by <strong>Namecheap</strong>. Both providers may collect standard server logs, such as IP addresses and browser information, which are handled according to their own policies.',
            section4Title: '4. Purpose of Processing',
            section4Content: 'The information you provide is used only to reply to your message. No profiling or marketing uses are involved.',
            section5Title: '5. Sharing',
            section5Intro: 'Your data is not sold. It is shared only with:',
            section5Item1: '<strong>FormJS</strong>, which receives and stores your form submission,',
            section5Item2: 'Email services required to deliver your message,',
            section5Item3: '<strong>Google</strong> (via reCAPTCHA),',
            section5Item4: 'Hosting and infrastructure providers mentioned above.',
            section6Title: '6. Storage Duration',
            section6Intro: 'Your message is stored:',
            section6Item1: 'on FormJS servers, according to FormJS\'s own retention rules, and',
            section6Item2: 'in the email inbox of <strong>gui.alucios@gmail.com</strong> until deleted manually or upon your request.',
            section7Title: '7. Your Rights (GDPR)',
            section7Intro: 'You may request:',
            section7Item1: 'Access to your data',
            section7Item2: 'Correction',
            section7Item3: 'Deletion',
            section7Contact: 'For such requests, contact: <strong>dhanurdharadas@bhaktimarga.org</strong>',
            section8Title: '8. Contact',
            section8Content: 'For privacy questions, please email:<br><strong>dhanurdharadas@bhaktimarga.org</strong>'
        },
        messages: {
            bookingSuccess: 'Message sent successfully'
        }
    },
    pt: {
        lang: {
            english: 'English',
            portuguese: 'Português'
        },
        nav: {
            logo: 'Centro de Bem-Estar',
            home: 'Início',
            about: 'Bhakti Marga',
            satguru: 'Satguru',
            bio: 'Biografia',
            practices: 'Práticas',
            contact: 'Contato'
        },
        home: {
            heroTitle: 'Dhanurdhara Das Ananda',
            heroSubtitle: 'Vamos mergulhar em Bhakti',
            getStarted: 'Começar',
            feature1Title: 'O caminho Devocional',
            feature1Text: 'O Senhor Kṛṣṇa fala:\nNa minha opinião, aqueles que com fé forte estão eternamente absortos em Mim e que com mentes focadas veneram a Minha forma pessoal, estão no caminho mais elevado',
            feature1Source: 'Bhagavad Gita 12.2',
            feature2Title: 'Métodos Naturais',
            feature2Text: 'Bhakti é um fluxo exclusivo de consciência amorosa em direção a Bhagavān que resulta em um profundo sentimento de pertencimento, se expressa como sevā e põe fim a todo o sofrimento.',
            feature2Source: 'Paramahamsa Vishwananda',
            feature3Text: 'De todas as formas de adoração ao Senhor, o amor é o mais elevado.',
            feature3Source: 'Saint Surdas'
        },
        about: {
            title: 'Bhakti Marga',
            storyTitle: 'Nossa História',
            story1: 'Bhakti Marga começou em 2005 como uma pequena comunidade devocional dedicada a cultivar uma vida baseada no amor, no serviço e na prática espiritual. Com o tempo, tornou-se um movimento global com centros, templos e ashrams distribuídos pela Europa, Américas, África e Ásia. Sua sede internacional, Shree Peetha Nilaya, na Alemanha, funciona como o principal ashram e centro de formação. Outros templos e ashrams estão ativos em países como Portugal, Reino Unido, França, África do Sul, Maurício, Índia, Estados Unidos e Brasil, cada um oferecendo encontros comunitários e programas devocionais regulares.\n\nO caminho se fundamenta no bhakti, a prática de direcionar o coração ao Divino por meio de meditação, canto, oração, puja e serviço altruísta. Bhakti Marga valoriza uma espiritualidade vivida: desenvolver devoção, promover transformação interior e sustentar comunidades que ajudam cada pessoa a aplicar princípios espirituais no dia a dia.\n\nAs atividades incluem cursos de meditação e yoga, adoração às deidades, satsangs, programas musicais, retiros, iniciativas de seva, peregrinações e grandes eventos internacionais como festivais de kirtan e celebrações sagradas. Muitos grupos locais também mantêm templos ou salas de puja com orações e rituais regulares.\n\nHoje, Bhakti Marga está presente em mais de 40 países, sustentada por centenas de voluntários e praticantes que mantêm templos, organizam eventos e compartilham os ensinamentos. Seu propósito permanece simples: apoiar cada pessoa a desenvolver uma relação amorosa e pessoal com o Divino e viver a devoção na sociedade contemporânea.',
            story2: '',
            story3: '',
            valuesTitle: '4 Braços',
            value1Title: 'Yoga e Meditação',
            value1Text: 'Acalme a mente, encontre Deus dentro de si',
            value2Title: 'Conhecimento',
            value2Text: 'Obtenha insights e clareza',
            value3Title: 'Rituais',
            value3Text: 'Aprofunde a conexão divina',
            value4Title: 'Artes Devocionais',
            value4Text: 'Crie uma expressão de amor',
            readMore: 'Leia mais',
            socialMediaTitle: 'Siga Bhakti Marga'
        },
        bio: {
            title: 'Biografia',
            name: 'Dhanurdhara Das Ananda',
            titleText: 'Professor de Conhecimento Espiritual, Rituais & Atma Kriya Yoga',
            text1: 'Nascido em julho de 1994, Dhanurdhara Das Ananda cresceu em uma família religiosa, mas nunca se considerou uma pessoa religiosa. Ainda jovem, após conquistar o que desejava materialmente, começou a sentir um vazio interior que não sabia como preencher.',
            text2: 'Movido por um interesse crescente por história, política e filosofia, iniciou uma busca mais profunda por autoconhecimento, espiritualidade e pela compreensão de Deus — caminho que o levou à cultura hindu.',
            text3: 'Em janeiro de 2017, conheceu Paramahamsa Vishwananda em São Paulo. Durante esse encontro, viveu uma experiência profunda e transformadora, que mais tarde reconheceu como um chamado da alma ao seu Satguru.',
            text4: 'Em Florianópolis, cidade onde residia, Paramahamsa Vishwananda inaugurou um templo a apenas dez minutos de sua casa, e Dhanurdhara passou a frequentá-lo regularmente. Um ano depois, viajou à Alemanha, ao ashram Shree Peetha Nilaya, onde se dedicou ao seva (serviço devocional) e ao aprendizado mais profundo sobre Bhakti Marga e o Hinduísmo.',
            educationTitle: 'Educação e Certificações',
            education1: 'Formação em Bhakti Yoga e Filosofia Védica, Bhakti Marga Academy',
            education2: 'Instrutor Certificado de Atma Kriya Yoga',
            education3: 'Formação em Rituais Védicos e Cerimônias Espirituais',
            education4: 'Estudos contínuos sob a orientação de Paramahamsa Vishwananda',
            experienceTitle: 'Experiência',
            experienceText: 'Com mais de sete anos dedicados ao caminho do Bhakti, Dhanurdhara Das Ananda atua como professor e facilitador de práticas espirituais, conduzindo aulas e palestras sobre conhecimento védico, rituais e Atma Kriya Yoga. Seu trabalho inspira buscadores espirituais a desenvolver uma relação mais profunda com o Divino, unindo sabedoria ancestral e prática devocional no cotidiano.'
        },
        satguru: {
            title: 'Satguru',
            subtitle: 'Paramahamsa Vishwananda',
            text1: 'Paramahamsa Sri Swami Vishwananda (nascido em 13 de junho de 1978, em Beau Bassin–Rose Hill, Maurício) é um mestre espiritual hindu nascido no Maurício e fundador da Bhakti Marga. Sua organização apresenta sua infância como profundamente devocional, marcada por um encontro formativo com Mahavatar Babaji — relação que ele descreve como o fio condutor de sua missão.',
            text2: 'Após viajar e oferecer darshan na Europa no fim dos anos 1990, ele fundou oficialmente a Bhakti Marga em 13 de junho de 2005. A sede internacional do movimento é Shree Peetha Nilaya, em Heidenrod (Taunus), Alemanha, de onde ele ensina um caminho de devoção (bhakti), incluindo práticas como Atma Kriya Yoga.',
            text3: 'Nos últimos anos, ele apresentou a Hari Bhakta Sampradaya, dentro da qual a Bhakti Marga opera, e a missão tem se expandido, passando a incluir templos e centros no mundo todo.',
            meetHim: 'O Encontre',
            spotifyHeading: 'Sempre tenha Ele em mente'
        },
        practices: {
            title: 'Práticas',
            practice1Title: 'Atma Kriya Yoga',
            practice1Text: 'Um yoga baseado na graça, dado por Paramahamsa Vishwananda, que desperta devoção para restaurar a conexão natural da alma com o Divino e aprofundar o amor por Deus.',
            practice2Title: 'Babaji Surya Namaskar',
            practice2Text: 'Uma meditação em movimento que honra o corpo como templo. Praticada em poucos minutos por dia, traz luz, vitalidade e energia elevada para todo o seu ser.',
            practice3Title: 'Om Chanting',
            practice3Text: 'Deus cria pela vibração; OM é o som-semente. Banhar-se na sua ressonância ajuda a limpar bloqueios mentais e físicos. Em grupo, também aproxima e conecta pessoas.',
            practice4Title: 'Simple Puja',
            practice4Text: 'Uma oferenda vaishnava de si mesmo a Sri Hari, por meio de adoração e amor—construindo uma relação viva com Ele e revelando a alegria do nosso vínculo eterno com Deus.',
            practice5Title: 'Abhishekam',
            practice5Text: 'Um ritual sagrado de banho que aprofunda a devoção, limpa negatividades internas e equilibra os elementos naturais do corpo, trazendo purificação, harmonia e graça.',
            practice6Title: 'Yajña',
            practice6Text: 'Oferenda altruísta por um propósito nobre: uma antiga cerimônia do fogo para purificação e adoração. Ao oferecer ao Divino, aprendemos entrega e confiança na oração.',
            practice7Title: 'Kalash Puja',
            practice7Text: 'Ritual de bênção para ocasiões, pessoas ou novos espaços. A água do kalaśa, energizada, é aspergida ou derramada, levando as bênçãos da Deidade principal e das demais invocadas.',
            practice8Title: 'Bhagavad Gita',
            practice8Text: 'Ensinamentos práticos sobre yoga, autocontrole e perfeição. Ajuda a lidar com pensamentos e desejos inquietos que geram sofrimento, trazendo clareza e devoção ao viver.',
            practice9Title: 'Tadatmya Vedanta',
            practice9Text: 'Um ensinamento sobre o pertencimento íntimo da alma a Deus: amor, dependência e graça revelam unidade com o Divino sem apagar a individualidade da alma.',
            moreInfoButton: 'Para mais informações'
        },
        booking: {
            title: 'Contato',
            nameLabel: 'Nome Completo',
            emailLabel: 'Email',
            phoneLabel: 'Telefone',
            dateLabel: 'Data Preferida',
            timeLabel: 'Horário Preferido',
            messageLabel: 'Mensagem',
            submitButton: 'Enviar Mensagem'
        },
        footer: {
            text: 'Dhanurdhara Das Ananda. Todos os direitos reservados.',
            privacyLink: 'Política de Privacidade'
        },
        privacy: {
            title: 'Política de Privacidade',
            lastUpdated: 'Última atualização: 2026',
            intro: 'Este site é um projeto pessoal operado por <strong>Dhanurdhara Das Ananda (Guilherme da Silva)</strong>. Coletamos apenas os dados mínimos necessários para responder às mensagens enviadas através do formulário de contato.',
            section1Title: '1. Dados coletados pelo formulário',
            section1Intro: 'Quando você envia uma mensagem, são coletadas as seguintes informações:',
            section1Item1: 'Nome completo',
            section1Item2: 'Endereço de e-mail',
            section1Item3: 'Sua mensagem',
            section1FormJS: 'O formulário é gerenciado por um serviço de terceiros chamado <strong>FormJS</strong>. Seus dados são:',
            section1FormJSItem1: 'armazenados nos servidores do FormJS, e',
            section1FormJSItem2: 'encaminhados por e-mail para: <strong>gui.alucios@gmail.com</strong>.',
            section1Contact: 'Para questões de privacidade, o contato é: <strong>dhanurdharadas@bhaktimarga.org</strong>.',
            section1Policy: 'O FormJS processa e armazena suas informações de acordo com a própria política de privacidade, disponível no site do FormJS.',
            section2Title: '2. Google reCAPTCHA v3',
            section2Intro: 'O formulário utiliza <strong>Google reCAPTCHA v3</strong> para proteção contra spam. O reCAPTCHA pode coletar dados técnicos, como:',
            section2Item1: 'Endereço IP',
            section2Item2: 'Informações do navegador',
            section2Item3: 'Padrões de uso e interação',
            section2Policy: 'Esses dados são processados pelo Google conforme suas próprias políticas, incluindo:',
            section2Policy1: 'Política de Privacidade do Google',
            section2Policy2: 'Termos de Serviço do Google',
            section3Title: '3. Hospedagem e registros técnicos',
            section3Content: 'Este site é hospedado no <strong>GitHub Pages</strong>, com domínio registrado na <strong>Namecheap</strong>. Ambos os provedores podem coletar registros técnicos padrão, incluindo endereços IP e informações do navegador, de acordo com as políticas deles.',
            section4Title: '4. Finalidade do processamento',
            section4Content: 'Os dados enviados são usados exclusivamente para responder à sua mensagem. Não há uso para marketing ou criação de perfis.',
            section5Title: '5. Compartilhamento',
            section5Intro: 'Seus dados não são vendidos. Eles são compartilhados apenas com:',
            section5Item1: '<strong>FormJS</strong>, que recebe e armazena sua submissão,',
            section5Item2: 'Serviços de e-mail necessários para entregar a mensagem,',
            section5Item3: '<strong>Google</strong> (através do reCAPTCHA),',
            section5Item4: 'Provedores de hospedagem e infraestrutura mencionados acima.',
            section6Title: '6. Prazo de armazenamento',
            section6Intro: 'A sua mensagem fica armazenada:',
            section6Item1: 'nos servidores do FormJS, conforme as regras de retenção do próprio FormJS, e',
            section6Item2: 'na caixa de entrada do e-mail <strong>gui.alucios@gmail.com</strong> até ser apagada manualmente ou mediante sua solicitação.',
            section7Title: '7. Seus direitos (GDPR)',
            section7Intro: 'Você pode solicitar:',
            section7Item1: 'Acesso aos seus dados',
            section7Item2: 'Correção',
            section7Item3: 'Exclusão',
            section7Contact: 'Para isso, entre em contato pelo e-mail: <strong>dhanurdharadas@bhaktimarga.org</strong>',
            section8Title: '8. Contato',
            section8Content: 'Para dúvidas sobre esta política, escreva para:<br><strong>dhanurdharadas@bhaktimarga.org</strong>'
        },
        messages: {
            bookingSuccess: 'Mensagem enviada com sucesso'
        }
    }
};

// Current language
let currentLang = localStorage.getItem('language') || 'en';

// Translation function
function translate(key) {
    const keys = key.split('.');
    let value = translations[currentLang];
    for (const k of keys) {
        value = value?.[k];
    }
    return value || key;
}

// Update page language
function updateLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('language', lang);
    document.documentElement.lang = lang;
    
    // Update all elements with data-translate attribute
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        const translation = translate(key);
        
        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
            element.placeholder = translation;
        } else if (element.tagName === 'OPTION') {
            element.textContent = translation;
        } else if (element.tagName === 'P') {
            // Convert newlines to <br> tags for paragraphs, preserve HTML
            element.innerHTML = translation.replace(/\n\n/g, '<br><br>').replace(/\n/g, '<br>');
        } else if (element.tagName === 'LI') {
            // Preserve HTML in list items (e.g., <strong> tags)
            element.innerHTML = translation;
        } else if (element.tagName === 'LABEL') {
            // For labels, check if associated input is required and add asterisk
            const inputId = element.getAttribute('for');
            if (inputId) {
                const input = document.getElementById(inputId);
                if (input && input.hasAttribute('required')) {
                    element.innerHTML = translation + ' <span class="required">*</span>';
                } else {
                    element.textContent = translation;
                }
            } else {
                element.textContent = translation;
            }
        } else {
            element.textContent = translation;
        }
    });
    
    // Update language dropdown display
    const dropdown = document.getElementById('language-dropdown');
    const selectedDisplay = document.getElementById('dropdown-selected');
    if (dropdown && selectedDisplay) {
        const selectedOption = dropdown.querySelector(`[data-lang="${lang}"]`);
        if (selectedOption) {
            const flag = selectedOption.querySelector('.flag').textContent;
            const langName = selectedOption.querySelector('.lang-name').textContent;
            const langNameMobile = selectedOption.querySelector('.lang-name-mobile');
            selectedDisplay.querySelector('.flag').textContent = flag;
            selectedDisplay.querySelector('.lang-name').textContent = langName;
            if (langNameMobile && selectedDisplay.querySelector('.lang-name-mobile')) {
                selectedDisplay.querySelector('.lang-name-mobile').textContent = langNameMobile.textContent;
            }
        }
    }
}

// Smooth scroll fallback function
function smoothScrollTo(target, duration) {
    const start = window.pageYOffset;
    const distance = target - start;
    let startTime = null;

    function easeInOutCubic(t) {
        return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
    }

    function animation(currentTime) {
        if (startTime === null) startTime = currentTime;
        const timeElapsed = currentTime - startTime;
        const progress = Math.min(timeElapsed / duration, 1);
        const ease = easeInOutCubic(progress);
        
        window.scrollTo(0, start + distance * ease);
        
        if (timeElapsed < duration) {
            requestAnimationFrame(animation);
        }
    }

    requestAnimationFrame(animation);
}

// Prevent browser from restoring scroll position
if ('scrollRestoration' in history) {
    history.scrollRestoration = 'manual';
}

// Navigation functionality
document.addEventListener('DOMContentLoaded', function() {
    // Immediately scroll to top on page load to prevent browser hash scrolling
    window.scrollTo(0, 0);
    
    const navLinks = document.querySelectorAll('.nav-link');
    const pages = document.querySelectorAll('.page');
    const hamburger = document.querySelector('.hamburger');
    const navMenu = document.querySelector('.nav-menu');

    // Logo element and navbar
    const headerLogo = document.getElementById('header-logo');
    const navbar = document.querySelector('.navbar');
    
    // Function to update logo based on active page
    function updateLogo(activePageId) {
        if (headerLogo) {
            if (activePageId === 'satguru') {
                // Satguru tab - use gold logo
                headerLogo.src = 'img/ddd-gold-logo-new.png';
            } else if (activePageId === 'about') {
                // Bhakti Marga tab - use blue logo
                headerLogo.src = 'img/ddd-blue-logo-new.png';
            } else {
                // All other tabs - use default logo
                headerLogo.src = 'img/ddd-logo-new.png';
            }
        }
    }
    
    // Function to update navbar background based on active page
    function updateNavbarBackground(activePageId) {
        if (navbar) {
            if (activePageId === 'home') {
                // Home tab - add yellow gradient background
                navbar.classList.add('home-active');
            } else {
                // All other tabs - remove yellow gradient background
                navbar.classList.remove('home-active');
            }
        }
    }

    // Handle navigation clicks
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href').substring(1);
            
            // Update URL hash
            window.location.hash = '#' + targetId;
            
            // Remove active class from all links and pages
            navLinks.forEach(l => l.classList.remove('active'));
            pages.forEach(p => p.classList.remove('active'));
            
            // Add active class to clicked link and target page
            this.classList.add('active');
            const targetPage = document.getElementById(targetId);
            if (targetPage) {
                targetPage.classList.add('active');
                
                // Update logo based on active page
                updateLogo(targetId);
                
                // Update navbar background based on active page
                updateNavbarBackground(targetId);
                
                // Smooth scroll to top with easing
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
                
                // Fallback for browsers that don't support smooth scroll
                if (!('scrollBehavior' in document.documentElement.style)) {
                    smoothScrollTo(0, 500);
                }
            }
            
            // Close mobile menu
            navMenu.classList.remove('active');
        });
    });

    // Hamburger menu toggle
    hamburger.addEventListener('click', function() {
        navMenu.classList.toggle('active');
        this.classList.toggle('active');
    });

    // Close mobile menu when clicking outside
    document.addEventListener('click', function(e) {
        if (!hamburger.contains(e.target) && !navMenu.contains(e.target)) {
            navMenu.classList.remove('active');
            hamburger.classList.remove('active');
        }
    });

    // Set initial active page based on hash or default to home
    const hash = window.location.hash.substring(1);
    if (hash && document.getElementById(hash)) {
        navLinks.forEach(l => l.classList.remove('active'));
        pages.forEach(p => p.classList.remove('active'));
        
        // Find and activate the corresponding nav link if it exists
        const navLink = document.querySelector(`a[href="#${hash}"]`);
        if (navLink) {
            navLink.classList.add('active');
        }
        
        // Activate the target page
        const targetPage = document.getElementById(hash);
        if (targetPage) {
            targetPage.classList.add('active');
            updateLogo(hash);
            updateNavbarBackground(hash);
        }
        
        // Ensure we're at the top on initial load
        window.scrollTo(0, 0);
    } else {
        // Default to home page
        navLinks.forEach(l => l.classList.remove('active'));
        pages.forEach(p => p.classList.remove('active'));
        document.querySelector('a[href="#home"]').classList.add('active');
        document.getElementById('home').classList.add('active');
        updateLogo('home');
        updateNavbarBackground('home');
        
        // Ensure we're at the top on initial load
        window.scrollTo(0, 0);
    }

    // Handle browser back/forward buttons and direct hash navigation
    window.addEventListener('hashchange', function() {
        const hash = window.location.hash.substring(1);
        if (hash && document.getElementById(hash)) {
            navLinks.forEach(l => l.classList.remove('active'));
            pages.forEach(p => p.classList.remove('active'));
            
            // Find and activate the corresponding nav link if it exists
            const navLink = document.querySelector(`a[href="#${hash}"]`);
            if (navLink) {
                navLink.classList.add('active');
            }
            
            // Activate the target page
            const targetPage = document.getElementById(hash);
            if (targetPage) {
                targetPage.classList.add('active');
                updateLogo(hash);
                updateNavbarBackground(hash);
                
                // Smooth scroll to top
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }
        } else {
            // Default to home if no hash or invalid hash
            navLinks.forEach(l => l.classList.remove('active'));
            pages.forEach(p => p.classList.remove('active'));
            document.querySelector('a[href="#home"]').classList.add('active');
            document.getElementById('home').classList.add('active');
            updateLogo('home');
            updateNavbarBackground('home');
        }
    });

    // Form submission
    // EmailJS Configuration
    // To set up EmailJS:
    // 1. Sign up for free at https://www.emailjs.com/
    // 2. Go to Email Services and add your email service (Gmail, Outlook, etc.)
    // 3. Go to Email Templates and create a new template with variables: {{from_name}}, {{from_email}}, {{message}}
    // 4. Go to Account > API Keys and copy your Public Key
    // 5. Replace the values below with your actual IDs
    
    const EMAILJS_CONFIG = {
        PUBLIC_KEY: "004uXZyZWr4V1_wSk",      // EmailJS Public Key
        SERVICE_ID: "service_wzm5n78",       // Email Service ID
        TEMPLATE_ID: "template_ertyu673mmnd8"      // Email Template ID
    };

    // reCAPTCHA Configuration
    const RECAPTCHA_CONFIG = {
        SITE_KEY: "6Lf4ZiAsAAAAAG7JVAuVTY0Pn63Kyn6jN47VBlCc"  // reCAPTCHA Site Key
    };

    // Initialize EmailJS - wait for library to load
    function initializeEmailJS() {
        if (typeof emailjs !== 'undefined') {
            emailjs.init(EMAILJS_CONFIG.PUBLIC_KEY);
            console.log('EmailJS initialized');
        } else {
            // Retry if library not loaded yet
            setTimeout(initializeEmailJS, 100);
        }
    }
    
    // Start initialization
    initializeEmailJS();

    const bookingForm = document.querySelector('.booking-form');
    if (bookingForm) {
        bookingForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Check if EmailJS is loaded and initialized
            if (typeof emailjs === 'undefined') {
                alert('Email service is loading. Please wait a moment and try again.');
                return;
            }
            
            // Check if EmailJS is configured
            if (EMAILJS_CONFIG.PUBLIC_KEY === "YOUR_PUBLIC_KEY" || 
                EMAILJS_CONFIG.SERVICE_ID === "YOUR_SERVICE_ID" || 
                EMAILJS_CONFIG.TEMPLATE_ID === "YOUR_TEMPLATE_ID") {
                alert('Email service is not configured. Please contact the website administrator.');
                return;
            }
            
            // Check if reCAPTCHA is configured
            if (RECAPTCHA_CONFIG.SITE_KEY === "YOUR_SITE_KEY") {
                // reCAPTCHA not configured - proceed without it
                submitForm(this);
                return;
            }
            
            // Execute reCAPTCHA
            const form = this;
            if (typeof grecaptcha !== 'undefined') {
                grecaptcha.ready(function() {
                    grecaptcha.execute(RECAPTCHA_CONFIG.SITE_KEY, {action: 'submit'})
                        .then(function(token) {
                            // reCAPTCHA verified - submit form
                            submitForm(form, token);
                        })
                        .catch(function(error) {
                            console.error('reCAPTCHA error:', error);
                            alert('reCAPTCHA verification failed. Please try again.');
                        });
                });
            } else {
                // reCAPTCHA not loaded - proceed without it
                submitForm(form);
            }
        });
    }

    // Form submission function
    function submitForm(form, recaptchaToken = null) {
        // Get form data
        const formData = new FormData(form);
        const data = {
            from_name: formData.get('name'),
            from_email: formData.get('email'),
            message: formData.get('message')
        };
        
        // Add reCAPTCHA token if available
        if (recaptchaToken) {
            data['g-recaptcha-response'] = recaptchaToken;
        }
        
        // Show loading state
        const submitButton = form.querySelector('button[type="submit"]');
        const originalButtonText = submitButton.textContent;
        submitButton.disabled = true;
        submitButton.textContent = 'Sending...';
        
        // Send email using EmailJS
        emailjs.send(EMAILJS_CONFIG.SERVICE_ID, EMAILJS_CONFIG.TEMPLATE_ID, data)
                .then(function(response) {
                    // Success
                    console.log('Email sent successfully!', response.status, response.text);
                    
                    // Show success message with form data
                    const successModal = document.getElementById('success-message');
                    const successName = document.getElementById('success-name');
                    const successEmail = document.getElementById('success-email');
                    const successMessageText = document.getElementById('success-message-text');
                    
                    if (successModal && successName && successEmail && successMessageText) {
                        successName.textContent = data.from_name;
                        successEmail.textContent = data.from_email;
                        successMessageText.textContent = data.message;
                        successModal.style.display = 'flex';
                        
                        // Update translations in success modal
                        updateLanguage(currentLang);
                    }
                    
                    form.reset();
                    submitButton.disabled = false;
                    submitButton.textContent = originalButtonText;
                }, function(error) {
                    // Error - show detailed error
                    console.error('EmailJS error details:', error);
                    console.error('Error status:', error.status);
                    console.error('Error text:', error.text);
                    let errorMessage = 'Sorry, there was an error sending your message. ';
                    if (error.text) {
                        errorMessage += 'Error: ' + error.text;
                    }
                    alert(errorMessage);
                    submitButton.disabled = false;
                    submitButton.textContent = originalButtonText;
                });
    }

    // Add scroll effect to navbar
    let lastScroll = 0;
    
    window.addEventListener('scroll', function() {
        const currentScroll = window.pageYOffset;
        
        if (currentScroll > 100) {
            navbar.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.15)';
        } else {
            navbar.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.1)';
        }
        
        lastScroll = currentScroll;
    });

    // Intersection Observer for fade-in animations on scroll
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    // Observe elements for scroll animations
    const animateElements = document.querySelectorAll('.feature-card, .practice-card, .value-item');
    animateElements.forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(el);
    });

    // Smooth reveal for images
    const images = document.querySelectorAll('img');
    images.forEach(img => {
        img.addEventListener('load', function() {
            this.style.opacity = '1';
        });
    });

    // Custom language dropdown functionality
    const dropdown = document.getElementById('language-dropdown');
    const selectedDisplay = document.getElementById('dropdown-selected');
    const dropdownOptions = document.getElementById('dropdown-options');
    
    if (dropdown && selectedDisplay && dropdownOptions) {
        // Toggle dropdown on click
        selectedDisplay.addEventListener('click', function(e) {
            e.stopPropagation();
            dropdown.classList.toggle('active');
        });
        
        // Handle option selection
        const options = dropdownOptions.querySelectorAll('.dropdown-option');
        options.forEach(option => {
            option.addEventListener('click', function(e) {
                e.stopPropagation();
                const lang = this.getAttribute('data-lang');
                updateLanguage(lang);
                dropdown.classList.remove('active');
            });
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!dropdown.contains(e.target)) {
                dropdown.classList.remove('active');
            }
        });
    }

    // Initialize language on page load
    updateLanguage(currentLang);
    
    // Ensure page stays at top after all resources load
    window.addEventListener('load', function() {
        window.scrollTo(0, 0);
    });

    // Satguru Carousel functionality
    const satguruCarousel = document.querySelector('.satguru-carousel-container');
    if (satguruCarousel) {
        const carouselTrack = satguruCarousel.querySelector('.carousel-track');
        const carouselSlides = satguruCarousel.querySelectorAll('.carousel-slide');
        const prevBtn = satguruCarousel.querySelector('.carousel-btn-prev');
        const nextBtn = satguruCarousel.querySelector('.carousel-btn-next');
        const dots = satguruCarousel.querySelectorAll('.carousel-dot');
        
        if (carouselTrack && carouselSlides.length > 0) {
            let currentIndex = 0;
            const totalSlides = carouselSlides.length;
            
            function getVisibleSlidesCount() {
                // Calculate how many slides fit in the viewport
                const containerWidth = carouselTrack.parentElement.offsetWidth;
                const gap = 16; // 1rem gap
                let totalWidth = 0;
                let count = 0;
                
                for (let i = 0; i < totalSlides; i++) {
                    const slideWidth = carouselSlides[i].offsetWidth;
                    if (totalWidth + slideWidth + (count > 0 ? gap : 0) <= containerWidth) {
                        totalWidth += slideWidth + (count > 0 ? gap : 0);
                        count++;
                    } else {
                        break;
                    }
                }
                return Math.max(1, count); // At least show 1 slide
            }
            
            function updateCarousel() {
                // Calculate translateX based on actual slide positions
                let translateX = 0;
                const gap = 16; // 1rem gap
                
                for (let i = 0; i < currentIndex && i < totalSlides; i++) {
                    translateX += carouselSlides[i].offsetWidth + gap;
                }
                
                carouselTrack.style.transform = `translateX(-${translateX}px)`;
                
                // Update dots based on current position
                const visibleCount = getVisibleSlidesCount();
                const maxIndex = Math.max(0, totalSlides - visibleCount);
                const dotIndex = Math.floor((currentIndex / totalSlides) * dots.length);
                
                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === dotIndex);
                });
            }
            
            function nextSlide() {
                const visibleCount = getVisibleSlidesCount();
                const maxIndex = Math.max(0, totalSlides - visibleCount);
                
                if (currentIndex < maxIndex) {
                    // Move forward by approximately one visible group
                    currentIndex = Math.min(currentIndex + visibleCount, maxIndex);
                } else {
                    currentIndex = 0; // Loop back to start
                }
                updateCarousel();
            }
            
            function prevSlide() {
                const visibleCount = getVisibleSlidesCount();
                
                if (currentIndex > 0) {
                    // Move backward by approximately one visible group
                    currentIndex = Math.max(0, currentIndex - visibleCount);
                } else {
                    const maxIndex = Math.max(0, totalSlides - visibleCount);
                    currentIndex = maxIndex; // Loop to end
                }
                updateCarousel();
            }
            
            function goToSlide(dotIndex) {
                // Calculate position based on dot index
                const maxIndex = Math.max(0, totalSlides - getVisibleSlidesCount());
                currentIndex = Math.floor((dotIndex / dots.length) * totalSlides);
                if (currentIndex > maxIndex) {
                    currentIndex = maxIndex;
                }
                updateCarousel();
            }
            
            // Event listeners
            if (nextBtn) {
                nextBtn.addEventListener('click', nextSlide);
            }
            
            if (prevBtn) {
                prevBtn.addEventListener('click', prevSlide);
            }
            
            // Dot navigation
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => goToSlide(index));
            });
            
            // Touch/swipe support for mobile
            let startX = 0;
            let endX = 0;
            
            carouselTrack.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
            });
            
            carouselTrack.addEventListener('touchend', (e) => {
                endX = e.changedTouches[0].clientX;
                handleSwipe();
            });
            
            function handleSwipe() {
                const diff = startX - endX;
                if (Math.abs(diff) > 50) { // Minimum swipe distance
                    if (diff > 0) {
                        nextSlide();
                    } else {
                        prevSlide();
                    }
                }
            }
            
            // Recalculate on window resize
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    const visibleCount = getVisibleSlidesCount();
                    const maxIndex = Math.max(0, totalSlides - visibleCount);
                    if (currentIndex > maxIndex) {
                        currentIndex = maxIndex;
                    }
                    updateCarousel();
                }, 250);
            });
            
            // Wait for images to load before initializing
            const images = carouselTrack.querySelectorAll('img');
            let imagesLoaded = 0;
            
            if (images.length > 0) {
                images.forEach(img => {
                    if (img.complete) {
                        imagesLoaded++;
                    } else {
                        img.addEventListener('load', () => {
                            imagesLoaded++;
                            if (imagesLoaded === images.length) {
                                updateCarousel();
                            }
                        });
                    }
                });
                
                if (imagesLoaded === images.length) {
                    updateCarousel();
                }
            } else {
                updateCarousel();
            }
        }
    }
});

// Bio thumbnail image swap functionality with auto-rotation
document.addEventListener('DOMContentLoaded', function() {
    const bioMainImage = document.getElementById('bio-main-image');
    const bioThumbnails = document.querySelectorAll('.bio-thumbnail');
    const bioPage = document.getElementById('bio');
    let autoRotateInterval = null;
    let currentImageIndex = 0;
    
    // All images in rotation order: ddd.jpg (main, no thumbnail) + 4 thumbnails
    const allImages = [
        'img/ddd.jpg',                    // Index 0 - main image, no thumbnail
        'img/guruji-ddd-2.jpg',          // Index 1 - thumbnail 0
        'img/guruji-ddd.jpg',            // Index 2 - thumbnail 1
        'img/guruji-ddd-1.jpeg',         // Index 3 - thumbnail 2
        'img/guruji-ddd-2019-initiation.jpg' // Index 4 - thumbnail 3
    ];
    
    // Map image paths to thumbnail indices (0 = no thumbnail for ddd.jpg)
    const imageToThumbnailIndex = {
        'img/ddd.jpg': -1,  // No thumbnail
        'img/guruji-ddd-2.jpg': 0,
        'img/guruji-ddd.jpg': 1,
        'img/guruji-ddd-1.jpeg': 2,
        'img/guruji-ddd-2019-initiation.jpg': 3
    };
    
    if (bioMainImage && bioThumbnails.length > 0) {
        // Function to switch to a specific image by index with fade transition
        function switchToImage(index) {
            if (index >= 0 && index < allImages.length) {
                const imageSrc = allImages[index];
                const thumbnailIndex = imageToThumbnailIndex[imageSrc];
                
                // Fade out
                bioMainImage.classList.add('fading');
                
                // After fade out, change image and fade in
                setTimeout(function() {
                    bioMainImage.src = imageSrc;
                    
                    // Update active state for thumbnails
                    bioThumbnails.forEach(thumb => thumb.classList.remove('active'));
                    if (thumbnailIndex >= 0 && thumbnailIndex < bioThumbnails.length) {
                        bioThumbnails[thumbnailIndex].classList.add('active');
                    }
                    
                    // Fade in
                    bioMainImage.classList.remove('fading');
                    
                    currentImageIndex = index;
                }, 250); // Half of the transition duration (0.5s / 2)
            }
        }
        
        // Function to rotate to next image
        function rotateToNext() {
            currentImageIndex = (currentImageIndex + 1) % allImages.length;
            switchToImage(currentImageIndex);
        }
        
        // Function to start auto-rotation
        function startAutoRotate() {
            // Clear any existing interval
            if (autoRotateInterval) {
                clearInterval(autoRotateInterval);
            }
            
            // Find current image index based on main image src
            const currentSrc = bioMainImage.src;
            allImages.forEach((img, index) => {
                if (currentSrc.includes(img.split('/').pop())) {
                    currentImageIndex = index;
                }
            });
            
            // Start rotating every 3 seconds
            autoRotateInterval = setInterval(rotateToNext, 3000);
        }
        
        // Function to stop auto-rotation
        function stopAutoRotate() {
            if (autoRotateInterval) {
                clearInterval(autoRotateInterval);
                autoRotateInterval = null;
            }
        }
        
        // Watch for bio page activation/deactivation
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.attributeName === 'class') {
                    const isActive = bioPage.classList.contains('active');
                    if (isActive) {
                        // Bio page is now active, start auto-rotation
                        startAutoRotate();
                    } else {
                        // Bio page is no longer active, stop auto-rotation
                        stopAutoRotate();
                    }
                }
            });
        });
        
        // Start observing the bio page for class changes
        if (bioPage) {
            observer.observe(bioPage, {
                attributes: true,
                attributeFilter: ['class']
            });
            
            // Check initial state
            if (bioPage.classList.contains('active')) {
                startAutoRotate();
            }
        }
        
        // Handle manual thumbnail clicks
        bioThumbnails.forEach((thumbnail, index) => {
            thumbnail.addEventListener('click', function() {
                // Stop current rotation
                stopAutoRotate();
                
                // Find the image index for this thumbnail
                const thumbnailSrc = thumbnail.getAttribute('data-full-image');
                const imageIndex = allImages.indexOf(thumbnailSrc);
                
                if (imageIndex >= 0) {
                    switchToImage(imageIndex);
                }
                
                // Restart auto-rotation after 3 seconds
                setTimeout(function() {
                    if (bioPage && bioPage.classList.contains('active')) {
                        startAutoRotate();
                    }
                }, 3000);
            });
        });
    }
});

